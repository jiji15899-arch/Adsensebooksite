<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GA100 - ì• ë“œì„¼ìŠ¤ ìˆ˜ìµí™” ì „ë¬¸ í”Œë«í¼</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- í—¤ë” -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="index.html">GA<span>100</span></a>
                </div>
                <nav class="nav">
                    <a href="#courses">ì „ìì±…</a>
                    <a href="revenue.html">ìˆ˜ìµì¸ì¦</a>
                    <a href="community.html">ì»¤ë®¤ë‹ˆí‹°</a>
                </nav>
                <div class="header-actions">
                    <button class="notification-btn" id="notificationBtn">
                        ğŸ””
                        <span class="notification-dot" id="notificationDot"></span>
                    </button>
                    <button class="menu-toggle" id="menuToggle">â˜°</button>
                </div>
            </div>
        </div>
    </header>

    <!-- ì‚¬ì´ë“œë°” -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3>GA100</h3>
            <button class="close-sidebar" id="closeSidebar">âœ•</button>
        </div>
        <div class="sidebar-content">
            <div class="sidebar-section">
                <button class="auth-btn" id="authBtn">ë¡œê·¸ì¸</button>
            </div>
            <div class="sidebar-section">
                <h4>ê°•ì˜</h4>
                <a href="courses.html?type=allinone">ì˜¬ì¸ì› ì „ìì±…</a>
                <a href="courses.html?type=extend">ìˆ˜ê°• ê¸°ê°„ ì—°ì¥</a>
                <a href="courses.html">ëª¨ë“  ê°•ì˜ ë³´ê¸°</a>
            </div>
            <div class="sidebar-section">
                <h4>ì»¤ë®¤ë‹ˆí‹°</h4>
                <a href="community.html?tab=notice">ê³µì§€</a>
                <a href="community.html?tab=secret">ì‹œí¬ë¦¿ 1:1 ì§ˆë¬¸</a>
                <a href="community.html?tab=community">ì œì ì»¤ë®¤ë‹ˆí‹°</a>
            </div>
            <div class="sidebar-section">
                <h4>í”„ë¡œê·¸ë¨</h4>
                <a href="#ai-writing">AI ê¸€ì“°ê¸°</a>
            </div>
        </div>
    </aside>

    <!-- ì•Œë¦¼ ë“œë¡­ë‹¤ìš´ -->
    <div class="notification-dropdown" id="notificationDropdown">
        <div class="notification-header">
            <h3>ì•Œë¦¼</h3>
        </div>
        <div class="notification-list" id="notificationList">
            <div class="notification-item">ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤.</div>
        </div>
    </div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="main-content">
        <!-- íˆì–´ë¡œ ì„¹ì…˜ -->
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <h1>ì• ë“œì„¼ìŠ¤ë¡œ <span>ìˆ˜ìµ ì°½ì¶œ</span>í•˜ì„¸ìš”</h1>
                    <p>ì²´ê³„ì ì¸ ì»¤ë¦¬í˜ëŸ¼ê³¼ ì‹¤ì „ ë…¸í•˜ìš°ë¡œ ë‹¹ì‹ ì˜ ì• ë“œì„¼ìŠ¤ ìˆ˜ìµì„ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤</p>
                    <div class="hero-actions">
                        <a href="courses.html" class="btn btn-primary">ê°•ì˜ ë‘˜ëŸ¬ë³´ê¸°</a>
                        <a href="revenue.html" class="btn btn-outline">ìˆ˜ìµì¸ì¦ ë³´ê¸°</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- ì¸ê¸° ê°•ì˜ -->
        <section class="featured-courses" id="courses">
            <div class="container">
                <h2>ì¸ê¸° ì „ìì±…</h2>
                <div class="course-grid" id="featuredCourses">
                    <!-- ë™ì ìœ¼ë¡œ ë¡œë“œ -->
                </div>
            </div>
        </section>

        <!-- ìˆ˜ìµ í†µê³„ -->
        <section class="stats">
            <div class="container">
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number" id="totalStudents">0</div>
                        <div class="stat-label">ìˆ˜ê°•ìƒ</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="totalRevenue">0</div>
                        <div class="stat-label">ìˆ˜ìµ ì¸ì¦</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="totalCourses">0</div>
                        <div class="stat-label">ì „ìì±…</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- í‘¸í„° -->
    <footer class="footer">
        <div class="container">
            <div class="footer-links">
                <a href="my-home.html">ë§ˆì´í™ˆ</a>
                <a href="revenue.html">ìˆ˜ìµì¸ì¦</a>
                <a href="courses.html">ì „ìì±…</a>
                <a href="community.html">ì»¤ë®¤ë‹ˆí‹°</a>
            </div>
            <div class="footer-info">
                <p>&copy; 2024 GA100. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="js/storage.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/security.js"></script>
    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            initAuth();
            loadFeaturedCourses();
            loadStats();
            checkNotifications();
            initSecurity();
        });

        // ì‚¬ì´ë“œë°” í† ê¸€
        document.getElementById('menuToggle').addEventListener('click', function() {
            document.getElementById('sidebar').classList.add('active');
        });

        document.getElementById('closeSidebar').addEventListener('click', function() {
            document.getElementById('sidebar').classList.remove('active');
        });

        // ì•Œë¦¼ í† ê¸€
        document.getElementById('notificationBtn').addEventListener('click', function() {
            const dropdown = document.getElementById('notificationDropdown');
            dropdown.classList.toggle('active');
        });

        // ì¸ê¸° ê°•ì˜ ë¡œë“œ
        function loadFeaturedCourses() {
            const courses = getCourses().slice(0, 3);
            const container = document.getElementById('featuredCourses');
            
            container.innerHTML = courses.map(course => `
                <div class="course-card">
                    <div class="course-image">
                        <span class="course-badge">${course.category}</span>
                    </div>
                    <div class="course-content">
                        <h3>${course.title}</h3>
                        <p>${course.description}</p>
                        <div class="course-footer">
                            <span class="course-price">${course.price === 0 ? 'ë¬´ë£Œ' : course.price.toLocaleString() + 'ì›'}</span>
                            <a href="course-detail.html?id=${course.id}" class="btn btn-small">ìì„¸íˆ ë³´ê¸°</a>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // í†µê³„ ë¡œë“œ
        function loadStats() {
            const users = getUsers();
            const revenues = getRevenues();
            const courses = getCourses();
            
            document.getElementById('totalStudents').textContent = users.length;
            document.getElementById('totalRevenue').textContent = revenues.length;
            document.getElementById('totalCourses').textContent = courses.length;
        }

        // ì•Œë¦¼ ì²´í¬
        function checkNotifications() {
            const notifications = getNotifications();
            const unread = notifications.filter(n => !n.read).length;
            
            if (unread > 0) {
                document.getElementById('notificationDot').style.display = 'block';
            }
            
            const list = document.getElementById('notificationList');
            if (notifications.length === 0) {
                list.innerHTML = '<div class="notification-item">ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
            } else {
                list.innerHTML = notifications.slice(0, 5).map(n => `
                    <div class="notification-item ${n.read ? '' : 'unread'}" onclick="openNotification('${n.id}')">
                        <div class="notification-title">${n.title}</div>
                        <div class="notification-time">${formatTime(n.time)}</div>
                    </div>
                `).join('');
            }
        }

        function openNotification(id) {
            markNotificationRead(id);
            const notification = getNotifications().find(n => n.id === id);
            if (notification) {
                window.location.href = notification.link;
            }
        }

        function formatTime(timestamp) {
            const date = new Date(timestamp);
            const now = new Date();
            const diff = now - date;
            const minutes = Math.floor(diff / 60000);
            const hours = Math.floor(minutes / 60);
            const days = Math.floor(hours / 24);
            
            if (minutes < 1) return 'ë°©ê¸ˆ ì „';
            if (minutes < 60) return `${minutes}ë¶„ ì „`;
            if (hours < 24) return `${hours}ì‹œê°„ ì „`;
            return `${days}ì¼ ì „`;
        }
    </script>
</body>
</html>
